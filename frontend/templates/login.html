<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™»å…¥ - Thread Console</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="auth-layout">

    <div class="card auth-card">
        <div style="text-align: center; margin-bottom: 2rem;">
            <h1 style="font-size: 1.75rem; color: var(--text-main);">ğŸ“‚ è³‡æ–™ç®¡ç†ç™»å…¥</h1>
            <p class="text-secondary text-sm">è«‹è¼¸å…¥æ†‘è­‰ä»¥ç¹¼çºŒ</p>
        </div>

        <form method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

            <div class="form-group">
                <label>å¸³è™Ÿ (Username)</label>
                <input type="text" name="username" class="input" placeholder="è«‹è¼¸å…¥å¸³è™Ÿ" style="margin-bottom:1rem;">

                <label>å¯†ç¢¼</label>
                <input type="password" name="password" class="input" placeholder="è«‹è¼¸å…¥å¯†ç¢¼" required maxlength="100">
            </div>

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}">
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}

            {% if error %}
            <div class="alert alert-error">
                âš ï¸ {{ error }}
            </div>
            {% endif %}

            <button type="submit" class="btn btn-primary btn-block" style="padding: 0.75rem; margin-top: 1rem;">
                ç™»å…¥ç³»çµ±
            </button>
        </form>

        <div
            style="text-align: center; margin-top: 2rem; border-top: 1px solid var(--surface-border); padding-top: 1rem;">
            <a href="/" class="btn btn-secondary btn-sm"
                style="background: transparent; border: none; color: var(--text-secondary);">
                â¬…ï¸ è¿”å›æœå°‹é¦–é 
            </a>
        </div>
    </div>

    <!-- Glassmorphism Orbs -->
    <div class="orb-1"></div>
    <div class="orb-2"></div>

    <!-- Theme Switcher -->
    <div style="position: fixed; bottom: 20px; left: 20px; z-index: 100; display: flex; align-items: center; gap: 8px;">
        <select id="themeSelect" class="select"
            style="padding: 0.25rem 0.5rem; font-size: 0.85rem; background: rgba(255, 255, 255, 0.9); border: 1px solid rgba(255,255,255,0.3); border-radius: 4px; color: #333; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.1); backdrop-filter: blur(5px);">
            <option value="bg-default">Default</option>
            <option value="bg-aurora">Aurora</option>
            <option value="bg-grid">Grid</option>
            <option value="bg-glass">Glass</option>
            <option value="bg-gray">Gray</option>
        </select>
    </div>

    <script nonce="{{ csp_nonce() }}">
        const themeSelect = document.getElementById('themeSelect');
        const body = document.body;

        function applyTheme(theme) {
            body.classList.remove('bg-default', 'bg-aurora', 'bg-grid', 'bg-glass', 'bg-gray');
            body.classList.add(theme);
            themeSelect.value = theme;
            localStorage.setItem('threadConsole_theme', theme);

            const card = document.querySelector('.auth-card');
            if (theme === 'bg-default' || theme === 'bg-grid') {
                card.style.background = 'rgba(255, 255, 255, 0.95)';
            } else {
                card.style.background = 'rgba(255, 255, 255, 0.75)';
            }
        }

        // Init Theme
        const savedTheme = localStorage.getItem('threadConsole_theme') || 'bg-default';
        applyTheme(savedTheme);

        themeSelect.addEventListener('change', (e) => {
            applyTheme(e.target.value);
        });
    </script>
</body>

</html>